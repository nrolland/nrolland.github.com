<?Xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>xQuant - Design - part 1 - controlling export with modules and types</title>
        <link rel="stylesheet" type="text/css" href="../../css/lhs.css" />
        <link rel="stylesheet" type="text/css" href="../../css/styling.css" />
        <link rel="alternate" type="application/rss+xml" title="xQuant.net Atom feed" href="http://xquant.net/atom.xml" /> 
        <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
        
    </head>
    <body>
        <div id="main-div" class="row;column;padding:0px">
            <div class="top-bar">
              <div class="top-bar-left">
                <ul class="menu" style="margin:25px" data-dropdown-menu>
                    <li class="menu-text"><h3><a href="../../">Home</a></li></h3>
               </ul>
              </div>
            </div>
            <div id="content" class="row column main" style="min-height:500px">
             
              <h1>Design - part 1 - controlling export with modules and types</h1>
             <div class="info">
    Posted on April  9, 2017
    
</div>
<div class="info">
    
</div>



<p>This is a series of design strategies from <a href="http://www.cs.ox.ac.uk/ralf.hinze/publications/With.pdf">fun with phantom type</a>. This is only the first part, as the paper covers a few aspects.</p>
<h1 id="raw">Raw</h1>
<p>First do everything in a single file can be a good strategy for fast results. But abstracting away can also <em>drive</em> the design, which means it pays off for itself directly upfront.</p>
<h1 id="modules-and-abstraction">Modules and abstraction</h1>
<p>Separates the service provided from the implementation, in particular the data <em>representation</em>, chosen.</p>
<p>Representation choice adresses the <em>algorithmic</em> concerns. It influence the execution, not the service provided.</p>
<p>For instance this logger shields the internal representation from its user. It only exports the type constructor <code>Logger</code> - no data constructor - and the accompanying functions.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb1-1" title="1"><span class="ot">#!/usr/bin/env stack</span></a>
<a class="sourceLine" id="cb1-2" title="2"><span class="co">-- stack script --resolver lts-8.8</span></a>
<a class="sourceLine" id="cb1-3" title="3"></a>
<a class="sourceLine" id="cb1-4" title="4"></a>
<a class="sourceLine" id="cb1-5" title="5"><span class="ot">{-# LANGUAGE GADTs #-}</span></a>
<a class="sourceLine" id="cb1-6" title="6"><span class="co">-- nous faisons une librarie et gardons opaques les types</span></a>
<a class="sourceLine" id="cb1-7" title="7"><span class="co">-- son implementation est asynchone mais son interface est synchrone</span></a>
<a class="sourceLine" id="cb1-8" title="8"><span class="co">-- on utilise dans un programme/thread normal et l'utilisateur n'a pas</span></a>
<a class="sourceLine" id="cb1-9" title="9"><span class="co">-- a se soucier de la maniere dont c'est implemente</span></a>
<a class="sourceLine" id="cb1-10" title="10"><span class="co">-- dans son utilisation, il sera impacte par notre implementation</span></a>
<a class="sourceLine" id="cb1-11" title="11"><span class="co">-- Par exemple il pourra devoir attendre s'il veut poster un message et que nous ne</span></a>
<a class="sourceLine" id="cb1-12" title="12"><span class="co">-- l'avons pas encore traite.</span></a>
<a class="sourceLine" id="cb1-13" title="13"></a>
<a class="sourceLine" id="cb1-14" title="14"></a>
<a class="sourceLine" id="cb1-15" title="15"><span class="kw">module</span> <span class="dt">Logger</span> (<span class="dt">Logger</span>,</a>
<a class="sourceLine" id="cb1-16" title="16">               initLogger,</a>
<a class="sourceLine" id="cb1-17" title="17">               logMessage,</a>
<a class="sourceLine" id="cb1-18" title="18">               logStop)</a>
<a class="sourceLine" id="cb1-19" title="19">    <span class="kw">where</span></a>
<a class="sourceLine" id="cb1-20" title="20"></a>
<a class="sourceLine" id="cb1-21" title="21"><span class="kw">import</span>           <span class="dt">Control.Concurrent</span></a>
<a class="sourceLine" id="cb1-22" title="22"></a>
<a class="sourceLine" id="cb1-23" title="23"><span class="co">-- en *interne*, un logger est une variable partagee</span></a>
<a class="sourceLine" id="cb1-24" title="24"><span class="co">-- dans laquelle on peut ecrire / lire des commandes</span></a>
<a class="sourceLine" id="cb1-25" title="25"><span class="kw">data</span> <span class="dt">Logger</span> <span class="kw">where</span></a>
<a class="sourceLine" id="cb1-26" title="26">  <span class="dt">Logger</span><span class="ot"> ::</span> <span class="dt">MVar</span> <span class="dt">LoggerCommand</span> <span class="ot">-&gt;</span> <span class="dt">Logger</span></a>
<a class="sourceLine" id="cb1-27" title="27"></a>
<a class="sourceLine" id="cb1-28" title="28"><span class="kw">data</span> <span class="dt">LoggerCommand</span> <span class="kw">where</span></a>
<a class="sourceLine" id="cb1-29" title="29">   <span class="dt">Message</span><span class="ot"> ::</span> <span class="dt">String</span> <span class="ot">-&gt;</span> <span class="dt">LoggerCommand</span></a>
<a class="sourceLine" id="cb1-30" title="30">   <span class="dt">Stop</span><span class="ot"> ::</span> <span class="dt">MVar</span> () <span class="ot">-&gt;</span> <span class="dt">LoggerCommand</span></a>
<a class="sourceLine" id="cb1-31" title="31"></a>
<a class="sourceLine" id="cb1-32" title="32"><span class="ot">initLogger ::</span> <span class="dt">IO</span> <span class="dt">Logger</span></a>
<a class="sourceLine" id="cb1-33" title="33">initLogger <span class="fu">=</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb1-34" title="34">   v <span class="ot">&lt;-</span> newEmptyMVar  <span class="co">-- et implemente selon semantique interne</span></a>
<a class="sourceLine" id="cb1-35" title="35">   <span class="kw">let</span> l <span class="fu">=</span> <span class="dt">Logger</span> v</a>
<a class="sourceLine" id="cb1-36" title="36">   forkIO <span class="fu">$</span> spin l   <span class="co">-- qui est un external thread</span></a>
<a class="sourceLine" id="cb1-37" title="37">   <span class="fu">return</span> l</a>
<a class="sourceLine" id="cb1-38" title="38"></a>
<a class="sourceLine" id="cb1-39" title="39"></a>
<a class="sourceLine" id="cb1-40" title="40"><span class="co">-- fonction interne</span></a>
<a class="sourceLine" id="cb1-41" title="41">spin l<span class="fu">@</span>(<span class="dt">Logger</span> sv) <span class="fu">=</span> <span class="kw">do</span> <span class="fu">putStrLn</span> <span class="st">&quot;Started logger&quot;</span></a>
<a class="sourceLine" id="cb1-42" title="42">                        loop</a>
<a class="sourceLine" id="cb1-43" title="43">  <span class="kw">where</span> loop <span class="fu">=</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb1-44" title="44">          cmd <span class="ot">&lt;-</span> takeMVar sv  <span class="co">-- on ecoute en bloquant</span></a>
<a class="sourceLine" id="cb1-45" title="45">          <span class="kw">case</span> cmd <span class="kw">of</span></a>
<a class="sourceLine" id="cb1-46" title="46">            <span class="dt">Message</span> msg <span class="ot">-&gt;</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb1-47" title="47">             <span class="fu">putStrLn</span> msg</a>
<a class="sourceLine" id="cb1-48" title="48">             loop</a>
<a class="sourceLine" id="cb1-49" title="49">            <span class="dt">Stop</span> stopv <span class="ot">-&gt;</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb1-50" title="50">             <span class="fu">putStrLn</span> <span class="st">&quot;Stopped logger&quot;</span></a>
<a class="sourceLine" id="cb1-51" title="51">             putMVar stopv ()</a>
<a class="sourceLine" id="cb1-52" title="52">             <span class="fu">return</span> ()</a>
<a class="sourceLine" id="cb1-53" title="53"></a>
<a class="sourceLine" id="cb1-54" title="54"><span class="ot">logMessage ::</span> <span class="dt">Logger</span> <span class="ot">-&gt;</span> <span class="dt">String</span> <span class="ot">-&gt;</span> <span class="dt">IO</span> ()</a>
<a class="sourceLine" id="cb1-55" title="55">logMessage (<span class="dt">Logger</span> sv) msg <span class="fu">=</span> putMVar sv (<span class="dt">Message</span> msg)</a>
<a class="sourceLine" id="cb1-56" title="56"></a>
<a class="sourceLine" id="cb1-57" title="57"><span class="ot">logStop ::</span> <span class="dt">Logger</span> <span class="ot">-&gt;</span> <span class="dt">IO</span> ()</a>
<a class="sourceLine" id="cb1-58" title="58">logStop (<span class="dt">Logger</span> sv) <span class="fu">=</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb1-59" title="59">     stopv <span class="ot">&lt;-</span> newEmptyMVar</a>
<a class="sourceLine" id="cb1-60" title="60">     putMVar sv (<span class="dt">Stop</span> stopv)</a>
<a class="sourceLine" id="cb1-61" title="61">     _ <span class="ot">&lt;-</span> takeMVar stopv</a>
<a class="sourceLine" id="cb1-62" title="62">     <span class="fu">return</span> ()</a>
<a class="sourceLine" id="cb1-63" title="63"></a>
<a class="sourceLine" id="cb1-64" title="64"></a>
<a class="sourceLine" id="cb1-65" title="65"><span class="ot">test ::</span> <span class="dt">IO</span> ()</a>
<a class="sourceLine" id="cb1-66" title="66">test <span class="fu">=</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb1-67" title="67">  l <span class="ot">&lt;-</span> initLogger</a>
<a class="sourceLine" id="cb1-68" title="68">  logMessage l <span class="st">&quot;hello&quot;</span></a>
<a class="sourceLine" id="cb1-69" title="69">  logMessage l <span class="st">&quot;Goodbye&quot;</span></a>
<a class="sourceLine" id="cb1-70" title="70">  logStop l</a>
<a class="sourceLine" id="cb1-71" title="71"></a>
<a class="sourceLine" id="cb1-72" title="72"></a>
<a class="sourceLine" id="cb1-73" title="73"><span class="ot">main ::</span> <span class="dt">IO</span> ()</a>
<a class="sourceLine" id="cb1-74" title="74">main <span class="fu">=</span> test</a></code></pre></div>
<h1 id="modules-pattern-in-haskell">Modules pattern in haskell</h1>
<p>One can add a file whose sole purpose is to perform abstraction : This file control what gets exported out, but has no code. Internal directory contains all the code and contian no export control, everything is public as far as it is concerned.</p>
<p>In <a href="https://github.com/turingjump/bookkeeper">bookeeper</a>, the file <a href="https://github.com/turingjump/bookkeeper/blob/master/src/Bookkeeper.hs">bookkeeper.hs</a> does exactly that.</p>
<p>More advanced strategies will be available with <a href="http://plv.mpi-sws.org/backpack/">backpack</a> soon</p>
<h1 id="phantom-type">Phantom type</h1>
<p>illustrating ideas from <a href="http://www.cs.ox.ac.uk/ralf.hinze/publications/With.pdf">fun with phantom type</a> the commented code is from <a href="https://gist.github.com/linusyang/4057470cf96b88d13bd8">here</a></p>
<p>The name “phantom types” is motivated by the fact that no actual data is ever attached to those types. Types are usually seen as a property of some data.</p>
<p>But when looking at what we can do with types this is a wrong idea : Types stand for static knowledge of any kind.</p>
<p>Example from the <a href="https://wiki.haskell.org/Phantom_type">haskell wiki</a></p>
<div class="sourceCode" id="cb2"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb2-1" title="1"><span class="co">-- you have no *data* constructor, you can not create value of that type</span></a>
<a class="sourceLine" id="cb2-2" title="2"><span class="co">-- but you can still *talk* about that type, whose values might be handed to you</span></a>
<a class="sourceLine" id="cb2-3" title="3"><span class="kw">module</span> <span class="dt">MyAPI</span>(<span class="dt">FormData</span>, <span class="co">--type constructor</span></a>
<a class="sourceLine" id="cb2-4" title="4">             formData, <span class="co">-- smart constructor WE decide at what index values are created</span></a>
<a class="sourceLine" id="cb2-5" title="5">             validate, <span class="co">-- normal API</span></a>
<a class="sourceLine" id="cb2-6" title="6">             useData,</a>
<a class="sourceLine" id="cb2-7" title="7">             lifSmallChange,</a>
<a class="sourceLine" id="cb2-8" title="8">            ) <span class="kw">where</span></a>
<a class="sourceLine" id="cb2-9" title="9"></a>
<a class="sourceLine" id="cb2-10" title="10"><span class="kw">import</span>           <span class="dt">Protolude</span></a>
<a class="sourceLine" id="cb2-11" title="11"></a>
<a class="sourceLine" id="cb2-12" title="12"><span class="co">-- FormData is a type constructor of kind :: * -&gt; *</span></a>
<a class="sourceLine" id="cb2-13" title="13"><span class="co">-- Given any type a of kind *, FormData a is of kind *</span></a>
<a class="sourceLine" id="cb2-14" title="14"><span class="kw">data</span> <span class="dt">FormData</span> a  <span class="kw">where</span></a>
<a class="sourceLine" id="cb2-15" title="15">  <span class="co">-- invoking the data constructor FormData with some text</span></a>
<a class="sourceLine" id="cb2-16" title="16">  <span class="co">-- creates a value of type FormData a where the CALLER chooses what a</span></a>
<a class="sourceLine" id="cb2-17" title="17">   <span class="dt">FormData</span><span class="ot"> ::</span> <span class="dt">Text</span> <span class="ot">-&gt;</span> <span class="dt">FormData</span> a</a>
<a class="sourceLine" id="cb2-18" title="18"></a>
<a class="sourceLine" id="cb2-19" title="19"><span class="co">-- withouth data constructor, impossible for clients to</span></a>
<a class="sourceLine" id="cb2-20" title="20"><span class="co">--  - inspect what's inside a value v :: FormaData Text</span></a>
<a class="sourceLine" id="cb2-21" title="21"><span class="co">--  - build a value v :: FormData i where THEY choose i</span></a>
<a class="sourceLine" id="cb2-22" title="22"><span class="ot">changeType ::</span> <span class="dt">FormData</span> a <span class="ot">-&gt;</span> <span class="dt">FormData</span> b</a>
<a class="sourceLine" id="cb2-23" title="23">changeType (<span class="dt">FormData</span> str) <span class="fu">=</span> <span class="dt">FormData</span> str</a>
<a class="sourceLine" id="cb2-24" title="24"></a>
<a class="sourceLine" id="cb2-25" title="25"></a>
<a class="sourceLine" id="cb2-26" title="26"><span class="kw">data</span> <span class="dt">Validated</span></a>
<a class="sourceLine" id="cb2-27" title="27"><span class="kw">data</span> <span class="dt">Unvalidated</span></a>
<a class="sourceLine" id="cb2-28" title="28"></a>
<a class="sourceLine" id="cb2-29" title="29"><span class="co">-- but WE can CHOOSE whichever type</span></a>
<a class="sourceLine" id="cb2-30" title="30"><span class="ot">formData ::</span> <span class="dt">Text</span> <span class="ot">-&gt;</span> <span class="dt">FormData</span> <span class="dt">Unvalidated</span> <span class="co">-- WE decide that if you call this, the data is Unvalidated</span></a>
<a class="sourceLine" id="cb2-31" title="31">formData str <span class="fu">=</span> <span class="dt">FormData</span> str</a>
<a class="sourceLine" id="cb2-32" title="32"></a>
<a class="sourceLine" id="cb2-33" title="33"><span class="co">-- we decide you can only ask use to consume validated data</span></a>
<a class="sourceLine" id="cb2-34" title="34"><span class="ot">useData ::</span> <span class="dt">FormData</span> <span class="dt">Validated</span> <span class="ot">-&gt;</span> <span class="dt">IO</span> ()</a>
<a class="sourceLine" id="cb2-35" title="35">useData (<span class="dt">FormData</span> str) <span class="fu">=</span> <span class="fu">undefined</span> <span class="co">-- logic here</span></a>
<a class="sourceLine" id="cb2-36" title="36"></a>
<a class="sourceLine" id="cb2-37" title="37"><span class="co">-- that means we FORCE YOU to call this function at *some* point before</span></a>
<a class="sourceLine" id="cb2-38" title="38"><span class="ot">validate ::</span> <span class="dt">FormData</span> <span class="dt">Unvalidated</span> <span class="ot">-&gt;</span> <span class="dt">Maybe</span> (<span class="dt">FormData</span> <span class="dt">Validated</span>)</a>
<a class="sourceLine" id="cb2-39" title="39">validate (<span class="dt">FormData</span> str) <span class="fu">=</span> <span class="fu">undefined</span> <span class="co">-- logic here</span></a>
<a class="sourceLine" id="cb2-40" title="40"></a>
<a class="sourceLine" id="cb2-41" title="41"></a>
<a class="sourceLine" id="cb2-42" title="42"><span class="co">-- benign operation</span></a>
<a class="sourceLine" id="cb2-43" title="43"><span class="ot">liftSmallChange ::</span> (<span class="dt">Text</span> <span class="ot">-&gt;</span> <span class="dt">Text</span>) <span class="ot">-&gt;</span> <span class="dt">FormData</span> a <span class="ot">-&gt;</span> <span class="dt">FormData</span> a</a>
<a class="sourceLine" id="cb2-44" title="44">liftSmallChange <span class="fu">=</span> <span class="fu">undefined</span> <span class="co">-- logic which only touch small stuff</span></a>
<a class="sourceLine" id="cb2-45" title="45"></a>
<a class="sourceLine" id="cb2-46" title="46"></a>
<a class="sourceLine" id="cb2-47" title="47"><span class="co">-- big operation - you have to revalidate !</span></a>
<a class="sourceLine" id="cb2-48" title="48"><span class="ot">liftBigChange ::</span> (<span class="dt">Text</span> <span class="ot">-&gt;</span> <span class="dt">Text</span>) <span class="ot">-&gt;</span> <span class="dt">FormData</span> a <span class="ot">-&gt;</span> <span class="dt">FormData</span> <span class="dt">Unvalidated</span></a>
<a class="sourceLine" id="cb2-49" title="49">liftBigChange <span class="fu">=</span> <span class="fu">undefined</span> <span class="co">-- logic which can touch anything</span></a></code></pre></div>
<p>with this, we separate validation from action, and prevent you from tampering after it’s validated, while still allowing you maximum freedom in how you operate. we keep control, you keep freedom</p>
<h1 id="middleware-pattern">Middleware pattern</h1>
<p>one direct example of this is the middleware pattern</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb3-1" title="1"><span class="kw">module</span> <span class="dt">Middleware</span>(<span class="dt">EndForYou</span>, <span class="co">-- type constructor</span></a>
<a class="sourceLine" id="cb3-2" title="2">                  serve      <span class="co">-- run your application</span></a>
<a class="sourceLine" id="cb3-3" title="3">            ) <span class="kw">where</span></a>
<a class="sourceLine" id="cb3-4" title="4"></a>
<a class="sourceLine" id="cb3-5" title="5"><span class="kw">import</span>           <span class="dt">Protolude</span></a>
<a class="sourceLine" id="cb3-6" title="6"></a>
<a class="sourceLine" id="cb3-7" title="7"><span class="kw">data</span> <span class="dt">EndForYou</span> <span class="kw">where</span></a>
<a class="sourceLine" id="cb3-8" title="8">   <span class="dt">TheEndCtor</span><span class="ot"> ::</span> <span class="dt">EndForYou</span></a>
<a class="sourceLine" id="cb3-9" title="9"></a>
<a class="sourceLine" id="cb3-10" title="10"></a>
<a class="sourceLine" id="cb3-11" title="11">app0 <span class="fu">=</span><span class="ot"> undefined ::</span> response</a>
<a class="sourceLine" id="cb3-12" title="12">app1 <span class="fu">=</span><span class="ot"> undefined ::</span> (response <span class="ot">-&gt;</span> m <span class="dt">EndForYou</span>) <span class="ot">-&gt;</span> m <span class="dt">EndForYou</span></a>
<a class="sourceLine" id="cb3-13" title="13">app2 <span class="fu">=</span><span class="ot"> undefined ::</span> input <span class="ot">-&gt;</span> (response <span class="ot">-&gt;</span> m <span class="dt">EndForYou</span>) <span class="ot">-&gt;</span> m <span class="dt">EndForYou</span></a>
<a class="sourceLine" id="cb3-14" title="14"></a>
<a class="sourceLine" id="cb3-15" title="15"></a>
<a class="sourceLine" id="cb3-16" title="16"><span class="kw">type</span> <span class="dt">Application</span> input response m <span class="fu">=</span> input <span class="ot">-&gt;</span> (response <span class="ot">-&gt;</span> m <span class="dt">EndForYou</span>) <span class="ot">-&gt;</span> m <span class="dt">EndForYou</span></a>
<a class="sourceLine" id="cb3-17" title="17"></a>
<a class="sourceLine" id="cb3-18" title="18"><span class="ot">serve ::</span> <span class="dt">Application</span> input output m <span class="ot">-&gt;</span> input <span class="ot">-&gt;</span> m <span class="dt">EndForYou</span></a>
<a class="sourceLine" id="cb3-19" title="19">serve yourServer input <span class="fu">=</span> (yourServer input) process</a>
<a class="sourceLine" id="cb3-20" title="20">  <span class="kw">where</span> process response <span class="fu">=</span> <span class="fu">undefined</span> <span class="co">-- actually sends the response</span></a>
<a class="sourceLine" id="cb3-21" title="21"></a>
<a class="sourceLine" id="cb3-22" title="22"></a>
<a class="sourceLine" id="cb3-23" title="23"><span class="co">-- cote client il y aura</span></a>
<a class="sourceLine" id="cb3-24" title="24"><span class="ot">receive ::</span> response <span class="ot">-&gt;</span> next</a>
<a class="sourceLine" id="cb3-25" title="25">receive <span class="fu">=</span> <span class="fu">undefined</span></a>
<a class="sourceLine" id="cb3-26" title="26"></a></code></pre></div>
<h1 id="types-at-work">Types at Work</h1>
<p>Types are nice, but in haskell they are not just decoration and checking. They are PART of the code, they DECIDE what to do. “Type is data”</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb4-1" title="1"><span class="kw">class</span> <span class="dt">Sanitise</span> a <span class="kw">where</span></a>
<a class="sourceLine" id="cb4-2" title="2"><span class="ot">  sanitise ::</span> <span class="dt">FormData</span> a <span class="ot">-&gt;</span> <span class="dt">FormData</span> <span class="dt">Validated</span></a>
<a class="sourceLine" id="cb4-3" title="3"></a>
<a class="sourceLine" id="cb4-4" title="4"><span class="co">-- do nothing to data that is already validated</span></a>
<a class="sourceLine" id="cb4-5" title="5"><span class="kw">instance</span> <span class="dt">Sanitise</span> <span class="dt">Validated</span> <span class="kw">where</span></a>
<a class="sourceLine" id="cb4-6" title="6">  sanitise <span class="fu">=</span> identity</a>
<a class="sourceLine" id="cb4-7" title="7"></a>
<a class="sourceLine" id="cb4-8" title="8"><span class="co">-- sanitise untrusted data</span></a>
<a class="sourceLine" id="cb4-9" title="9"><span class="kw">instance</span> <span class="dt">Sanitise</span> <span class="dt">Unvalidated</span> <span class="kw">where</span></a>
<a class="sourceLine" id="cb4-10" title="10">  sanitise (<span class="dt">FormData</span> str) <span class="fu">=</span> <span class="dt">FormData</span> (<span class="fu">filter</span> <span class="fu">isAlpha</span> str) <span class="kw">where</span> <span class="fu">filter</span> <span class="fu">=</span> <span class="fu">undefined</span></a>
<a class="sourceLine" id="cb4-11" title="11">                                                                <span class="fu">isAlpha</span> <span class="fu">=</span> <span class="fu">undefined</span></a>
<a class="sourceLine" id="cb4-12" title="12"></a>
<a class="sourceLine" id="cb4-13" title="13"></a>
<a class="sourceLine" id="cb4-14" title="14">a <span class="fu">=</span> <span class="dt">FormData</span> <span class="st">&quot;Hello&quot;</span></a>
<a class="sourceLine" id="cb4-15" title="15"></a>
<a class="sourceLine" id="cb4-16" title="16"><span class="co">-- the type chooses what will be done !</span></a>
<a class="sourceLine" id="cb4-17" title="17">_ <span class="fu">=</span> sanitise (<span class="ot">a ::</span> <span class="dt">FormData</span> <span class="dt">Unvalidated</span>)</a>
<a class="sourceLine" id="cb4-18" title="18">_ <span class="fu">=</span> sanitise (<span class="ot">a ::</span> <span class="dt">FormData</span> <span class="dt">Validated</span>)</a>
<a class="sourceLine" id="cb4-19" title="19"></a>
<a class="sourceLine" id="cb4-20" title="20"><span class="co">-- if it can't, it's an error, just like a syntax error</span></a>
<a class="sourceLine" id="cb4-21" title="21">_ <span class="fu">=</span> sanitise a <span class="co">-- error !</span></a></code></pre></div>


            </div>
        </div>

        <footer>
            <div class="footer"> </div>
        </footer>
        <!-- Third-party -->
        <script src="../../js/jquery.min.js" type="application/javascript"></script>
        <script src="../../js/what-input.min.js" type="application/javascript"></script>
        <script src="../../js/foundation.min.js" type="application/javascript"></script>
        <script>
         